#!/usr/bin/env python
import inspect
from public import public


def _is_src_staticmethod(obj):
    try:
        lines, _ = inspect.getsourcelines(obj)
        if lines and lines[0].strip() == "@staticmethod":
            return True
    except TypeError:
        pass

# python 2: <function staticmethod at ...>
# python 3: <function CLS.staticmethod at ...>


def _is_py2_staticmethod(obj):
    return "<function staticmethod at" in str(obj)


def _is_py3_staticmethod(obj):
    return "<function " in str(obj) and "." in str(obj)


@public
def isstaticmethod(obj):
    if _is_src_staticmethod(obj):
        return True
    if _is_py2_staticmethod(obj) or _is_py3_staticmethod(obj):
        return True
    return False
